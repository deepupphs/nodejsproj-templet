<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Daily Reports</title>
    <link rel="icon" type="image" style="width:100%" href="./libraries/index/images/golo_logo.png" />
    <link href="./admin_assets/css/styles.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/js/all.min.js"></script>

    <!-- angular files -->
    <script src="./libraries/js/angular.js"></script>
    <script src="./libraries/js/angular-cookies.js"></script>
    <script src="./libraries/lib/notification.js"></script>
    <script src="./libraries/lib/angular-ui-notification.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.3/angular-sanitize.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ng-csv/0.3.3/ng-csv.min.js"></script>
    <script src="./angular/config.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.22/pdfmake.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
    <link rel="stylesheet" href="./libraries/angular-ui-notification.min.css" />
    <!-- STYLE FOR TOGGLE BUTTON -->

<style>
   .table-hover > tbody > td:hover {
    background-color: #f5f5f5;
}
td[ng-click] {
    cursor: pointer;
}

  ul.breadcrumb {
  padding: 10px 16px;
  list-style: none;
  background-color: #eee;
}

/* Display list items side by side */
ul.breadcrumb li {
  display: inline;
  font-size: 18px;
}

/* Add a slash symbol (/) before/behind each list item */
ul.breadcrumb li+li:before {
  padding: 8px;
  color: black;
  content: "/\00a0";
}

/* Add a color to all links inside the list */
ul.breadcrumb li a {
  color: #0275d8;
  text-decoration: none;
}

/* Add a color on mouse-over */
ul.breadcrumb li a:hover {
  color: #01447e;
  text-decoration: underline;
}

  .switch {
    position: relative;
    display: inline-block;
    width: 81px;
    height: 18px;
  }

  .switch input {
    display: none;
  }

  .slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    /* left: 0; */
    right: 0;
    bottom: 0;
    background-color:tomato;
    -webkit-transition: .4s;
    transition: .4s;
    border-radius: 34px;
    width: 84px;
    margin-top: 5px;
    margin-bottom: -8px;
  }

  .slider:before {
    position: absolute;
    content: "";
    height: 13px;
    width: 13px;
    left: 5px;
    bottom: 4px;
    background-color: white;
    -webkit-transition: .4s;
    transition: .4s;
    border-radius: 50%;
  }

  input:checked+.slider {
    background-color: #17b515e0;
  }

  input:focus+.slider {
    box-shadow: 0 0 1px #2196F3;
  }

  input:checked+.slider:before {
    -webkit-transform: translateX(26px);
    -ms-transform: translateX(26px);
    transform: translateX(55px);
  }

  /*------ ADDED CSS ---------*/

  .slider:after {
    content: '   NOT-HOST';
    color: white;
    display: block;
    position: absolute;
    transform: translate(-50%, -50%);
    top: 50%;
    left: 54%;
    font-size: 10px;
    font-family: Verdana, sans-serif;
    width: 81px;
  }

  input:checked+.slider:after {
    content: 'HOST';
  }

  
</style>

    <style>
      /* Style the tab */
      .active {
  background-color: #1c74ff8f;
}
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
}

/* Style the buttons inside the tab */
.tab button {
  background-color: inherit;
    float: left;
    border: none;
    outline: none;
    cursor: pointer;
    padding: 14px 16px;
    transition: 0.3s;
    font-size: 15px;
    font-weight: inherit
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}
</style>
    </style>

    <!-- page loader -->
    <style>
      .warning{
   border:1px solid red;
 }
    </style>
    <style>
      .loader {
        position: fixed;
        left: 0px;
        top: 0px;
        width: 100%;
        height: 100%;
        z-index: 9999;
        background: url("./libraries/index/images/processing.gif") 50% 50%
          no-repeat rgb(249, 249, 249);
      }
    </style>
    <script src="./admin_assets/js/ajax/jquery.min.js"></script>

    <script type="text/javascript">
      $(window).load(function () {
        $(".loader").fadeOut("slow");
      });
    </script>
  </head>

  <body
    class="sb-nav-fixed"
    ng-app="dashboardApp"
    ng-controller="AdashboardController"
   
  >
    <div class="loader"></div>
    <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
      <a class="navbar-brand" href="">
        <img
          align="center"
          alt="Image"
          border="0"
          class="center autowidth"
          src="./libraries/index/images/golo_logo.png"
          style="
            text-decoration: none;
            -ms-interpolation-mode: bicubic;
            border: 0;
            height: auto;
            width: 100%;
            max-width: 40px;
            display: block;
          "
          title="Image"
          width="165"
        /> 
       </a
      ><span style="margin-top: -3px;margin-left: -159px;margin-right: 110px;color: white;">Agency</span><button
        class="btn btn-link btn-sm order-1 order-lg-0"
        id="sidebarToggle"
        href="#"
      >
        <i class="fas fa-bars"></i></button
      ><!-- Navbar Search-->
      <form
        class="d-none d-md-inline-block form-inline ml-auto mr-0 mr-md-3 my-2 my-md-0"
      >
      <span style="color: white">{{profile.name}}</span>
      
      </form>
      <!-- Navbar-->
      <ul class="navbar-nav ml-auto ml-md-0">
      
        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle"
            id="userDropdown"
            href="#"
            role="button"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
            ><i class="fas fa-user fa-fw"></i
          ></a>
          <div
            class="dropdown-menu dropdown-menu-right"
            aria-labelledby="userDropdown"
          >
            <a class="dropdown-item" href="/agency-login">Logout</a>
          </div>
        </li>
      </ul>
    </nav>
    <div id="layoutSidenav">
      <div id="layoutSidenav_nav">
        <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
          <div class="sb-sidenav-menu">
            <div class="nav">
              <!-- <div class="sb-sidenav-menu-heading">Dashboard</div> -->
              <a class="nav-link" href="/agency-dashboard"
                ><div class="sb-nav-link-icon">
                  <i class="fas fa-tachometer-alt"></i>
                </div>
                Dashboard</a
              >
              <a class="nav-link" href="/agency-hosts"
                ><div class="sb-nav-link-icon">
                  <i class="fas fa-users"></i>
                </div>
                Hosts</a
              >
              <a
              class="nav-link collapsed"
              href="#"
              data-toggle="collapse"
              data-target="#collapseLayouts"
              aria-expanded="false"
              aria-controls="collapseLayouts"
            >
              <div class="sb-nav-link-icon"><i class="fa fa-file"></i></div>
              Reports
              <div class="sb-sidenav-collapse-arrow">
                <i class="fas fa-angle-down"></i>
              </div>
            </a>
            <div
              class="collapse"
              id="collapseLayouts"
              aria-labelledby="headingOne"
              data-parent="#sidenavAccordion"
            >
              <nav class="sb-sidenav-menu-nested nav">
                <a class="nav-link" href="/agency-host-daily-report">Daily Report</a>
              </nav>
            </div>
          
            <a
              class="nav-link collapsed"
              href="#"
              data-toggle="collapse"
              data-target="#collapseLayouts1"
              aria-expanded="false"
              aria-controls="collapseLayouts"
            >
              <div class="sb-nav-link-icon"><i class="fa fa-file"></i></div>
              Settlements
              <div class="sb-sidenav-collapse-arrow">
                <i class="fas fa-angle-down"></i>
              </div>
            </a>
            <div
              class="collapse"
              id="collapseLayouts1"
              aria-labelledby="headingOne"
              data-parent="#sidenavAccordion"
            >
              <nav class="sb-sidenav-menu-nested nav">
                <a class="nav-link" href="/agency-settlements">All Settlements</a>
              </nav>
            </div>
             
            </div>
          </div>
          <div class="sb-sidenav-footer">
            <div class="small">Logged in as:</div>
            Agency
          </div>
        </nav>
      </div>
     
      <div id="layoutSidenav_content">
        <main>
          <div class="card-header">
            <ul class="breadcrumb">
              <li ><a href="#" ng-click="getMonthlyReports(currentMonth)">Monthly Report</a></li>
              <li ><a href="#" ng-click="getDailyReports(currentMonth)">Daily Report</a></li>
              <li ><a href="#" >Hostee Report</a></li>
            </ul>
            <input ng-hide="monthlyReports.length == 0" id="exampleInput" class="form-control" type="date" name="input" ng-change="getMonthlyReports(reportMonth)" ng-model="reportMonth"
                      style="width: 200px;float: right;margin-top: -60px;margin-left: 25px;" />
          </div>
          <!-- Monthly report -->
          <div class="container-fluid" ng-show="monthlyReports.length > 0 && dailyReports.length == 0 && hostReports.length == 0">
            <a class="navbar-brand" href=""></a>
            
              <div class="card mb-4">
                <div class="card-header">
                  <h1 class="mt-4" style="float: left;"> Monthly Report</h1>
                  <!-- <input id="exampleInput" class="form-control" type="month" name="input" ng-change="getMonthlyReports(reportMonth)" ng-model="reportMonth"
                     placeholder="yyyy-MM" min="1900-01" max="2050-12" style="width: 200px;float: left;margin-top: 15px;margin-left: 25px;" /> -->
                  <button ng-csv="monthlyReports" csv-header="['Date', 'Agent ID', 'Host ID', 'User ID', 'Name', 'Date', 'Total Earning', 'Total Live duration', 'Total Call Duration']" filename="monthly_report.csv" class="btn btn-success" 
                  style="margin-left: 20px;margin-top: 20px;float: right;"><i class="fa fa-file-excel" aria-hidden="true"></i></button>
                 <button  class="btn btn-danger" ng-click="exportMonthly()" style="margin-left: 20px;margin-top: 20px;
                 float: right;"><i class="fa fa-file-pdf" aria-hidden="true"></i></button>
                 
                </div>
                <div class="card-body" >
                  <div class="table-responsive" id="monthlyPdf">
                    <table
                      class="table table-bordered table-hover"
                      width="100%"
                      cellspacing="0"
                    >
                    <thead style="background-color: #f7f7f7;">
                      <tr>
                        <th>Date</th>
                        <th>Final Earning</th>
                        <th>Total Live Durarion</th>
                        <th>Total Call Durarion</th>
                      </tr>
                    </thead>
  
                    <tbody>
                      
                      <tr ng-repeat="user in monthlyReports | pagingAdmin:pageSizeByAdmin ">
                        <td href="" ng-click="getDailyReports(user.date)">{{user.date }}</td>
                        <td href="" ng-click="getDailyReports(user.date)">${{user.totalEarning * onePointValue | number:2}}</td>
                        <td href="" ng-click="getDailyReports(user.date)">{{user.totalLiveDuration / 3600 | number:2}} h</td>
                        <td href="" ng-click="getDailyReports(user.date)">{{user.totalCallDuration / 3600 | number:2}} h</td>
                      </tr>
                    </tbody>
                    </table>
                    <div>
                      <span>
                        <input type="button" value="First " ng-click="NavFirstAdmin()" class=" btn btn-primary  btn-flat " title="First"></input>
        
                        <input type="button" value="<<" ng-click="NavPrevAdmin()" class=" btn btn-primary  btn-flat "></input>
        
                        <input type="button" value="{{ localObjectAdmin.pageNum }}" class=" btn btn-primary  btn-flat " title="previous"></input>
        
                        <input type="button" value=">>" ng-click="NavNextAdmin()" class="btn btn-primary  btn-flat" title="next"></input>
        
                        <input ng-if="TotalPagesAdmin()!=1" type="button" value="Last " ng-click="NavLastAdmin()" class=" btn btn-primary  btn-flat "
                          title="Last"></input>
                      </span>
                      <span style="float:right;">
                        Page Size:
                        <select style="width:40px;" ng-model="pageSizeByAdmin" ng-change="localObjectAdmin.reset()">
                          <option value="2">2</option>
                          <option value="5" selected>5</option>
                          <option value="10">10</option>
                          <option value="20">20</option>
                        </select>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
           

           
          </div>
          <!-- Dail report -->
          <div class="container-fluid" ng-show="monthlyReports.length == 0 && dailyReports.length > 0 && hostReports.length == 0">
            <a class="navbar-brand" href=""></a>
            
              <div class="card mb-4">
                <div class="card-header">
                  <h1 class="mt-4" style="float: left;"> Daily Report</h1>
                  <input  class="form-control" type="text"  ng-model="reportDailyHost" placeholder="ID"  style="width: 200px;float: left;margin-top: 15px;margin-left: 25px;" />
                  <button ng-csv="dailyReports" csv-header="['Date', 'Agent ID', 'Host ID', 'User ID', 'Name', 'Date', 'Total Earning', 'Total Live duration', 'Total Call Duration']" filename="daily_report.csv" class="btn btn-success" 
                  style="margin-left: 20px;margin-top: 20px;float: right;"><i class="fa fa-file-excel" aria-hidden="true"></i></button>
                  <button  class="btn btn-danger" ng-click="exportDaily()" style="margin-left: 20px;margin-top: 20px;
                 float: right;"><i class="fa fa-file-pdf" aria-hidden="true"></i></button>
                </div>
                <div class="card-body">
                  <div class="table-responsive" id="dailyPdf">
                    <table
                      class="table table-bordered table-hover"
                      width="100%"
                      cellspacing="0"
                    >
                    <thead style="background-color: #f7f7f7;">
                      <tr>
                        <!-- <th>Date</th> -->
                        <th>ID</th>
                        <th>User Name</th>
                        <th>Final Earning</th>
                        <th>Total Live Durarion</th>
                        <th>Total Call Durarion</th>
                      </tr>
                    </thead>
  
                    <tbody>
                      <tr ng-repeat="user in dailyReports | pagingAdmin:pageSizeByUser | filter : reportDailyHost ">
                        <!-- <td href="" ng-click="getHostReports(user.date,user.hostUserId)">{{user.date}}</td> -->
                        <td href="" ng-click="getHostReports(user.date,user.hostUserId)">{{user.hostUserId}}</td>
                        <td href="" ng-click="getHostReports(user.date,user.hostUserId)">{{user.hostUserName}}</td>
                        <td href="" ng-click="getHostReports(user.date,user.hostUserId)">${{user.totalEarning * onePointValue | number:2}}</td>
                        <td href="" ng-click="getHostReports(user.date,user.hostUserId)">{{user.totalLiveDuration / 3600 | number:2}} h</td>
                        <td href="" ng-click="getHostReports(user.date,user.hostUserId)">{{user.totalCallDuration / 3600 | number:2}} h</td>
                      </tr>
                    </tbody>
                    </table>
                    <div>
                      <span>
                        <input type="button" value="First " ng-click="NavFirstUser()" class=" btn btn-primary  btn-flat " title="First"></input>
        
                        <input type="button" value="<<" ng-click="NavPrevUser()" class=" btn btn-primary  btn-flat "></input>
        
                        <input type="button" value="{{ localObjectUser.pageNum }}" class=" btn btn-primary  btn-flat " title="previous"></input>
        
                        <input type="button" value=">>" ng-click="NavNextUser()" class="btn btn-primary  btn-flat" title="next"></input>
        
                        <input ng-if="TotalPagesUser()!=1" type="button" value="Last " ng-click="NavLastUser()" class=" btn btn-primary  btn-flat "
                          title="Last"></input>
                      </span>
                      <span style="float:right;">
                        Page Size:
                        <select style="width:40px;" ng-model="pageSizeByUser" ng-change="localObjectUser.reset()">
                          <option value="2">2</option>
                          <option value="5" selected>5</option>
                          <option value="10">10</option>
                          <option value="20">20</option>
                        </select>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
           

           
          </div>
           <!-- Host report -->
           <div class="container-fluid" ng-show="monthlyReports.length == 0 && dailyReports.length == 0 && hostReports.length > 0">
            <a class="navbar-brand" href=""></a>
           
              <div class="card mb-4">
                <div class="card-header">
                  <h1 class="mt-4" style="float: left;"> Hostee Report</h1>
                  <input id="exampleInput" class="form-control" type="month" name="input"  ng-model="reportMonth" ng-change="getHostReports(reportMonth, reportHostId)"
                     placeholder="yyyy-MM" min="1900-01" max="2050-12" style="width: 200px;float: left;margin-top: 15px;margin-left: 25px;" />
                  <input  class="form-control" type="text"  style="width: 200px;float: left;margin-top: 15px;margin-left: 30px;" ng-model="reportHostId"
                     placeholder="ID"  style="width: 200px;float: left;" />
                  <button ng-csv="hostReports" csv-header="['Date', 'Agent ID', 'Host ID', 'User ID', 'Name', 'Date', 'Total Earning', 'Total Live duration', 'Total Call Duration']" filename="Host_daily_report.csv" class="btn btn-success" 
                     style="margin-left: 20px;margin-top: 20px;float: right;"><i class="fa fa-file-excel" aria-hidden="true"></i></button>
                  <button  class="btn btn-danger" ng-click="exportHostee()" style="margin-left: 20px;margin-top: 20px;
                 float: right;"><i class="fa fa-file-pdf" aria-hidden="true"></i></button>
                </div>
                <div class="card-body">
                  <div class="table-responsive" id="hostPdf">
                    <table
                      class="table table-bordered table-hover"
                      width="100%"
                      cellspacing="0"
                    >
                    <thead style="background-color: #f7f7f7;">
                      <tr>
                        <th>Date</th>
                        <th>ID</th>
                        <th>Final Earning</th>
                        <th>Total Live Durarion</th>
                        <th>Total Call Durarion</th>
                      </tr>
                    </thead>
  
                    <tbody>
                      <tr ng-repeat="user in hostReports | pagingAdmin:pageSizeGroup ">
                        <td href="" >{{user.date}}</td>
                        <td href="" >{{user.hostUserId}}</td>
                        <td href="" >${{user.totalEarning * onePointValue | number:2}}</td>
                        <td href="" >{{user.totalLiveDuration / 3600 | number:2}} h</td>
                        <td href="" >{{user.totalCallDuration / 3600 | number:2}} h</td>
                      </tr>
                    </tbody>
                    </table>
                    <div>
                      <span>
                        <input type="button" value="First " ng-click="NavFirstGroup()" class=" btn btn-primary  btn-flat " title="First"></input>
        
                        <input type="button" value="<<" ng-click="NavPrevGroup()" class=" btn btn-primary  btn-flat "></input>
        
                        <input type="button" value="{{ localObjectGroup.pageNum }}" class=" btn btn-primary  btn-flat " title="previous"></input>
        
                        <input type="button" value=">>" ng-click="NavNextGroup()" class="btn btn-primary  btn-flat" title="next"></input>
        
                        <input ng-if="TotalPagesGroup()!=1" type="button" value="Last " ng-click="NavLastGroup()" class=" btn btn-primary  btn-flat "
                          title="Last"></input>
                      </span>
                      <span style="float:right;">
                        Page Size:
                        <select style="width:40px;" ng-model="pageSizeByGroup" ng-change="localObjectGroup.reset()">
                          <option value="2">2</option>
                          <option value="5" selected>5</option>
                          <option value="10">10</option>
                          <option value="20">20</option>
                        </select>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
           

           
          </div>
        </main>
        <footer class="bg-light mt-auto">
          <div class="container-fluid">
            <div
              class="d-flex align-items-center justify-content-between small"
            >
              <div class="text-muted">Copyright &copy; Golo 2020</div>
              <div>
                <a href="#">Privacy Policy</a>
                &middot;
                <a href="#">Terms &amp; Conditions</a>
              </div>
            </div>
          </div>
        </footer>
      </div>
    </div>

     


    <script src="./admin_assets/js/jquery-3.4.1.min.js"></script>
    <script src="./admin_assets/js/bootstrap.bundle.min.js"></script>
    <script src="./admin_assets/js/scripts.js"></script>
    <script src="./angular/reports.js"></script>
  </body>
</html>
